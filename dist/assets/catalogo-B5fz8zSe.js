import"./globals-Cp2N6dhv.js";const e={pdfDoc:null,currentPage:1,totalPages:0,scale:1,searchText:"",currentSearchIndex:0,searchMatches:[]},t=document.getElementById("pdf-canvas"),a=t.getContext("2d"),n=document.getElementById("page-num"),c=document.getElementById("page-count"),s=document.getElementById("prev-page"),o=document.getElementById("next-page"),r=document.getElementById("zoom-in"),d=document.getElementById("zoom-out"),i=document.getElementById("zoom-level"),l=document.getElementById("search-input"),g=document.getElementById("search-btn"),m=document.getElementById("download-pdf"),u=document.getElementById("print-pdf"),p=document.getElementById("loading"),h=document.querySelector(".pdf-canvas-wrapper");async function y(c){try{if(!e.pdfDoc)return;if(c<1||c>e.totalPages)return;e.currentPage=c,n.textContent=c;const r=await e.pdfDoc.getPage(c),d=1.5,i=r.getViewport({scale:d*e.scale});t.width=i.width,t.height=i.height;const l={canvasContext:a,viewport:i};await r.render(l).promise,s.disabled=e.currentPage<=1,o.disabled=e.currentPage>=e.totalPages,s.classList.toggle("opacity-50",e.currentPage<=1),o.classList.toggle("opacity-50",e.currentPage>=e.totalPages),h.scrollTop=0}catch(r){console.error("Erro ao renderizar página:",r)}}function v(){const t=Math.round(1.5*e.scale*100/1.5);i.textContent=`${t}%`}async function E(){const t=l.value.trim();if(!t)return e.searchText="",void(e.searchMatches=[]);e.searchText=t.toLowerCase(),e.searchMatches=[],e.currentSearchIndex=0;try{for(let t=1;t<=e.totalPages;t++){const a=await e.pdfDoc.getPage(t),n=await a.getTextContent();let c="";for(const e of n.items)"str"in e&&(c+=e.str+" ");c.toLowerCase().includes(e.searchText)&&e.searchMatches.push(t)}e.searchMatches.length>0?(await y(e.searchMatches[0]),l.classList.remove("ring-red-500"),l.classList.add("ring-2","ring-america-blue")):(l.classList.remove("ring-america-blue"),l.classList.add("ring-2","ring-red-500"),alert(`Nenhum resultado encontrado para "${t}"`))}catch(a){console.error("Erro ao buscar:",a)}}s.addEventListener("click",async()=>{e.currentPage>1&&await y(e.currentPage-1)}),o.addEventListener("click",async()=>{e.currentPage<e.totalPages&&await y(e.currentPage+1)}),document.addEventListener("keydown",async e=>{"ArrowLeft"===e.key?s.click():"ArrowRight"===e.key&&o.click()}),r.addEventListener("click",async()=>{e.scale<3&&(e.scale+=.25,v(),await y(e.currentPage))}),d.addEventListener("click",async()=>{e.scale>.5&&(e.scale-=.25,v(),await y(e.currentPage))}),g.addEventListener("click",async()=>{await E()}),l.addEventListener("keydown",async e=>{"Enter"===e.key&&await E()}),m.addEventListener("click",()=>{const e=document.createElement("a");e.href="/catalogo-2026.pdf",e.download="catalogo-2026-america-industria.pdf",document.body.appendChild(e),e.click(),document.body.removeChild(e)}),u.addEventListener("click",()=>{window.open("/catalogo-2026.pdf","_blank").print()}),n.addEventListener("click",()=>{const t=prompt(`Digite o número da página (1-${e.totalPages}):`);if(t){const a=parseInt(t,10);!isNaN(a)&&a>=1&&a<=e.totalPages&&y(a)}});const L=document.getElementById("menuBtn"),f=document.getElementById("closeBtn"),w=document.getElementById("mobileMenu"),P=document.getElementById("overlay"),k=document.querySelectorAll("#mobileMenu a");L&&L.addEventListener("click",()=>{w.classList.add("active"),P.classList.remove("hidden")}),f&&f.addEventListener("click",()=>{w.classList.remove("active"),P.classList.add("hidden")}),P&&P.addEventListener("click",()=>{w.classList.remove("active"),P.classList.add("hidden")}),k.forEach(e=>{e.addEventListener("click",()=>{w.classList.remove("active"),P.classList.add("hidden")})}),document.addEventListener("DOMContentLoaded",()=>{!async function(){try{p.classList.remove("hidden");const t="/catalogo-2026.pdf",a=await pdfjsLib.getDocument(t).promise;e.pdfDoc=a,e.totalPages=a.numPages,c.textContent=e.totalPages,await y(1),p.classList.add("hidden")}catch(t){console.error("Erro ao carregar PDF:",t),p.innerHTML=`\n      <div class="text-center text-america-red">\n        <p class="font-bold mb-2">Erro ao carregar o catálogo</p>\n        <p class="text-sm text-slate-400">${t.message}</p>\n        <p class="text-xs text-slate-500 mt-4">Verifique se o arquivo catalogo-2026.pdf existe em /public</p>\n      </div>\n    `}}()});
